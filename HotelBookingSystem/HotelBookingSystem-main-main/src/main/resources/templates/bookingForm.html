<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Booking</title>

    <style>
        body {
            margin: 0;
            background: #f5f6fa;
            font-family: Arial, Helvetica, sans-serif;
        }

        .page-wrapper {
            max-width: 1200px;
            margin: 80px auto;
            padding: 0 20px;
        }

        .booking-wrapper {
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }

        /* ===== LEFT ===== */
        .room-preview {
            flex: 1;
            background: #fff;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.06);
        }

        .room-preview img {
            width: 100%;
            border-radius: 12px;
            cursor: pointer;
        }

        .view-btn {
            margin-top: 14px;
            width: 100%;
            padding: 12px;
            background: #006340;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ===== RIGHT ===== */
        .booking-box {
            width: 420px;
            background: #fff;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.06);
            margin-top: 60px;
        }

        label {
            font-weight: bold;
            margin-top: 12px;
            display: block;
        }

        input {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border-radius: 6px;
            border: 1px solid #ccc;
        }

        .submit-btn {
            margin-top: 22px;
            width: 100%;
            padding: 12px;
            background: #006340;
            color: #fff;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            justify-content: center;
            align-items: center;
            z-index: 999;
        }

        .modal-content {
            background: #111;
            padding: 20px;
            border-radius: 12px;
            max-width: 900px;
            width: 90%;
            position: relative;
        }

        .modal img {
            width: 100%;
            border-radius: 10px;
        }

        .close {
            position: absolute;
            top: 10px;
            right: 14px;
            font-size: 22px;
            color: #fff;
            cursor: pointer;
        }

        .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 30px;
            background: rgba(255,255,255,0.2);
            color: #fff;
            border: none;
            padding: 10px 16px;
            cursor: pointer;
            border-radius: 50%;
        }

        .prev { left: -50px; }
        .next { right: -50px; }
    </style>
</head>

<body>

<div class="page-wrapper">

    <div class="booking-wrapper">

        <!-- ===== ROOM PREVIEW ===== -->
        <div class="room-preview"
             th:attr="data-room=${room.roomNumber}">

            <img th:src="${room.roomNumber == '101'}
                 ? '/images/rooms/executiveRoom.webp'
                 : '/images/rooms/superiorCityView.webp'"
                 onclick="openModal()">

            <button class="view-btn" onclick="openModal()">
                View room pictures
            </button>
        </div>

        <!-- ===== FORM ===== -->
        <div class="booking-box">
            <h3>üìù Nh·∫≠p th√¥ng tin booking</h3>

            <form th:action="@{/booking/preview}" method="post">
                <input type="hidden" name="roomId" th:value="${room.id}"/>

                <label>Check-in</label>
                <input type="date" name="checkIn" required>

                <label>Check-out</label>
                <input type="date" name="checkOut" required>

                <label>S·ªë kh√°ch</label>
                <input type="number" name="guests" min="1" required>

                <button class="submit-btn">Ti·∫øp t·ª•c</button>
            </form>
        </div>

    </div>
</div>

<!-- ===== MODAL ===== -->
<div class="modal" id="imageModal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">‚úï</span>
        <button class="nav-btn prev" onclick="prevImage()">‚Äπ</button>
        <img id="modalImage">
        <button class="nav-btn next" onclick="nextImage()">‚Ä∫</button>
    </div>
</div>

<script>
    /* ===== IMAGE SETS ===== */

    const executiveImages = [
        "/images/rooms/executiveRoom.webp",
        "/images/rooms/executiveRoom1.webp", // TH√äM H√åNH DETAIL PH√íNG EXECUTIVE ·ªû ƒê√ÇY
        "/images/rooms/executiveRoom2.webp"  // TH√äM H√åNH DETAIL PH√íNG EXECUTIVE ·ªû ƒê√ÇY
    ];

    const superiorImages = [
        "/images/rooms/superiorCityView.webp",
        "/images/rooms/superiorCityView1.webp", // TH√äM H√åNH DETAIL PH√íNG SUPERIOR ·ªû ƒê√ÇY
        "/images/rooms/superiorCityView2.webp"  // TH√äM H√åNH DETAIL PH√íNG SUPERIOR ·ªû ƒê√ÇY
    ];

    let images = [];
    let currentIndex = 0;

    function openModal() {
        const roomNumber =
            document.querySelector(".room-preview").dataset.room;

        images = (roomNumber === "101")
            ? executiveImages
            : superiorImages;

        currentIndex = 0;
        document.getElementById("modalImage").src = images[0];
        document.getElementById("imageModal").style.display = "flex";
    }

    function closeModal() {
        document.getElementById("imageModal").style.display = "none";
    }

    function nextImage() {
        currentIndex = (currentIndex + 1) % images.length;
        document.getElementById("modalImage").src = images[currentIndex];
    }

    function prevImage() {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        document.getElementById("modalImage").src = images[currentIndex];
    }
</script>

</body>
</html>
